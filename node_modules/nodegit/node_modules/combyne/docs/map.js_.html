<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: shared/map.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: shared/map.js</h1>

    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Iterates various JavaScript types.
 *
 * @module utils/map
 * @requires utils/type
 * @requires utils/create_object
 */
define(function(require, exports, module) {
  "use strict";

  // Utils.
  var type = require("../utils/type");
  var createObject = require("../utils/create_object");

  // Support.
  require("../support/array/is_array");

  /**
   * Allows iteration of an Array, Arguments, NodeList, or plain Object.
   *
   * @memberOf module:utils/map
   * @param {*} obj - Object or Array to iterate.
   * @param {String} index - An identifier name for index.
   * @param {String} value - An identifier name for value.
   * @param {object} data - Data from parent scope.
   * @param {Function} iterator - Function that is called within the template.
   * @returns {Array} String output to be joined.
   */
  function map(obj, index, value, data, iterator) {
    var isArrayLike = type(obj) === "arguments" || type(obj) === "nodelist";
    var isArray = Array.isArray(obj) || isArrayLike;
    var output = [];
    var dataObject;

    // Iteration branch if Array.
    if (isArray) {
      // Make a clone of the Array to operate on, also potentially coercing.
      obj = [].slice.call(obj);

      for (var i = 0; i &lt; obj.length; i++) {
        // Create a new scoped data object.
        dataObject = createObject(data);
        dataObject[index] = i;

        if (value) {
          dataObject[value] = obj[i];
        }
        // If no value was supplied, use this object to key off of.
        else {
          dataObject = obj[i];
        }

        // Add return value of iterator function to output.
        output.push(iterator(dataObject));
      }

      return output;
    }
    // Iteration branch if Object.
    else {
      for (var key in obj) {
        if (!obj.hasOwnProperty(key)) {
          continue;
        }

        // Create a new scoped data object.
        dataObject = createObject(data);
        dataObject[index] = key;

        if (value) {
          dataObject[value] = obj[key];
        }
        // If no value was supplied, use this object to key off of.
        else {
          dataObject = obj[key];
        }

        // Add return value of iterator function to output.
        output.push(iterator(dataObject));
      }

      return output;
    }
  }

  module.exports = map;
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="module-compiler.html">compiler</a></li><li><a href="module-grammar.html">grammar</a></li><li><a href="module-index.html">index</a></li><li><a href="encode.html">shared/encode</a></li><li><a href="register_filter.html">shared/register_filter</a></li><li><a href="register_partial.html">shared/register_partial</a></li><li><a href="module-tokenizer.html">tokenizer</a></li><li><a href="module-tree.html">tree</a></li><li><a href="create_object.html">utils/create_object</a></li><li><a href="defaults.html">utils/defaults</a></li><li><a href="escape_delimiter.html">utils/escape_delimiter</a></li><li><a href="map_.html">utils/map</a></li><li><a href="type.html">utils/type</a></li></ul><h3>Classes</h3><ul><li><a href="module-compiler.Compiler.html">Compiler</a></li><li><a href="module-grammar.Grammar.html">Grammar</a></li><li><a href="module-index.Combyne.html">Combyne</a></li><li><a href="module-tokenizer.Tokenizer.html">Tokenizer</a></li><li><a href="module-tree.Tree.html">Tree</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha9</a> on Mon Sep 15 2014 21:36:09 GMT-0400 (EDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
